"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7008],{3905:function(e,t,a){a.d(t,{Zo:function(){return m},kt:function(){return k}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},m=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=s(a),k=r,N=u["".concat(p,".").concat(k)]||u[k]||d[k]||l;return a?n.createElement(N,i(i({ref:t},m),{},{components:a})):n.createElement(N,i({ref:t},m))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=u;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},99942:function(e,t,a){a.r(t),a.d(t,{assets:function(){return m},contentTitle:function(){return p},default:function(){return k},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return d}});var n=a(87462),r=a(63366),l=(a(67294),a(3905)),i=["components"],o={sidebar_position:14,title:"Query Language Syntax Update"},p=void 0,s={unversionedId:"cep/reference/query-language-update",id:"cep/reference/query-language-update",title:"Query Language Syntax Update",description:"We updated the query language syntax for Stream QL applications to be more consistent with the industry standard. This section describes the differences between the updated syntax (version 2) and the old syntax (version 1), and how to update your applications from version 1 to version 2. Updating to version 2 is not necessary as version 1 applications are still supported. Applications provided by Macrometa are automatically updated.",source:"@site/docs/cep/reference/query-language-update.md",sourceDirName:"cep/reference",slug:"/cep/reference/query-language-update",permalink:"/docs/cep/reference/query-language-update",draft:!1,editUrl:"https://github.com/macrometacorp/docs/edit/master/docs/cep/reference/query-language-update.md",tags:[],version:"current",sidebarPosition:14,frontMatter:{sidebar_position:14,title:"Query Language Syntax Update"},sidebar:"tutorialSidebar",previous:{title:"Limits",permalink:"/docs/cep/reference/limits"},next:{title:"Context",permalink:"/docs/cep/reference/extensions/execution/context"}},m={},d=[{value:"Key Words and Types",id:"key-words-and-types",level:3},{value:"Define Streams",id:"define-streams",level:3},{value:"Define Tables",id:"define-tables",level:3},{value:"Define Trigger",id:"define-trigger",level:3},{value:"Define Sinks",id:"define-sinks",level:3},{value:"Define Sources",id:"define-sources",level:3},{value:"Define Stores",id:"define-stores",level:3},{value:"Define Named Windows",id:"define-named-windows",level:3},{value:"Define Functions",id:"define-functions",level:3},{value:"Define Stream As Select",id:"define-stream-as-select",level:3},{value:"Define Table As Select",id:"define-table-as-select",level:3},{value:"Query Order",id:"query-order",level:3},{value:"Windows in Queries",id:"windows-in-queries",level:3},{value:"WHERE Clauses",id:"where-clauses",level:3}],u={toc:d};function k(e){var t=e.components,a=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"We updated the query language syntax for Stream QL applications to be more consistent with the industry standard. This section describes the differences between the updated syntax (version 2) and the old syntax (version 1), and how to update your applications from version 1 to version 2. Updating to version 2 is not necessary as version 1 applications are still supported. Applications provided by Macrometa are automatically updated."),(0,l.kt)("p",null,"You must include ",(0,l.kt)("inlineCode",{parentName:"p"},"@App:qlversion('2')")," at the beginning of the stream application so Stream QL recognizes it as version 2."),(0,l.kt)("p",null,"For all queries, version 2 replaces annotations such as ",(0,l.kt)("inlineCode",{parentName:"p"},"@sink")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"@source")," are replaced by keywords such as ",(0,l.kt)("inlineCode",{parentName:"p"},"SINK")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"SOURCE")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"WITH()")," properties. For example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Version 1:",(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"@sink(type='http-call', sink.id='echo-service', publisher.url='http://postman-echo.com/post', @map(type='json', @payload('{{payloadBody}}'))) ...\n")))),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Version 2:",(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"CREATE SINK sink_name WITH (type='http-call', sink.id='echo-service', publisher.url='http://postman-echo.com/post', map.type='json', map.payload = '{{payloadBody}}') ...\n")))),(0,l.kt)("p",null,"Refer to the following sections for more details:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#key-words-and-types"},"Key Words and Types")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-streams"},"Define Streams")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-tables"},"Define Tables")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-trigger"},"Define Trigger")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-sinks"},"Define Sinks")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-sources"},"Define Sources")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-stoes"},"Define Stores")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-named-windows"},"Define Named Windows")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-functions"},"Define Functions")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-stream-as-select"},"Define Stream As Select")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#define-table-as-select"},"Define Table As Select")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#query-order"},"Query Order")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#windows-in-queries"},"Windows in Queries")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"#where-clauses"},"WHERE Clauses"))),(0,l.kt)("h3",{id:"key-words-and-types"},"Key Words and Types"),(0,l.kt)("p",null,"With version 2, all keywords and types are case insensitive."),(0,l.kt)("p",null,"This table describes updates to key words and query types:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Version 1"),(0,l.kt)("th",{parentName:"tr",align:null},"Version 2"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"define")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"CREATE"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"c8streams")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"stream"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"c8db")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"database"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"restql-call")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"query-worker"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"restql-call-response")),(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"query-worker"))))),(0,l.kt)("p",null,"Additionally, the following key words are added for more granular querying:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"SINK"),": Used with ",(0,l.kt)("inlineCode",{parentName:"li"},"CREATE SINK"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"SOURCE"),": Used with ",(0,l.kt)("inlineCode",{parentName:"li"},"CREATE SOURCE"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"STORE"),": Used with ",(0,l.kt)("inlineCode",{parentName:"li"},"CREATE STORE"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"GLOBAL"),": Used with ",(0,l.kt)("inlineCode",{parentName:"li"},"CREATE STREAM GLOBAL?")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"CREATE TABLE GLOBAL|SPOT?"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"SPOT"),": Used with ",(0,l.kt)("inlineCode",{parentName:"li"},"CREATE TABLE GLOBAL|SPOT?"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"INTERVAL"),": Used with ",(0,l.kt)("inlineCode",{parentName:"li"},"CREATE TRIGGER"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"EXPRESSION"),": Used with ",(0,l.kt)("inlineCode",{parentName:"li"},"CREATE TRIGGER"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"WHERE"),": Alternative to ",(0,l.kt)("inlineCode",{parentName:"li"},"HAVING"),".")),(0,l.kt)("h3",{id:"define-streams"},"Define Streams"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"@sink(type = 'c8streams', stream = \"ExampleStream\")\ndefine stream ExampleStream (data string);\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"// Creates GDN stream source (default):\nCREATE STREAM ExampleStream (data string);\n\n// Also creates GDN stream source:\nCREATE SOURCE STREAM ExampleStreamSource (data string);\n\n// Creates GDN stream sink:\nCREATE SINK STREAM ExampleStreamSink (data string);\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#stream"},"Stream")," for more information."),(0,l.kt)("h3",{id:"define-tables"},"Define Tables"),(0,l.kt)("p",null,"Tables no longer require ",(0,l.kt)("inlineCode",{parentName:"p"},"@sink")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"@source")," annotations."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"@store(type=\u2019c8db\u2019, collection=`<table_name>`)\ndefine table <table_name> (<attribute_name> <attribute_type>, ...);\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE ExampleTable (data string);\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#table-collection"},"Table (Collection)")," for more information."),(0,l.kt)("h3",{id:"define-trigger"},"Define Trigger"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"define trigger InitTrigger at 'start';\ndefine trigger FiveMinTrigger at every 5 min;\ndefine trigger WorkStartTrigger at '0 15 10 ? * MON-FRI';\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TRIGGER InitTrigger WITH (expression = 'start');\nCREATE TRIGGER FiveMinTrigger WITH (interval = 5 min);\nCREATE TRIGGER WorkStartTrigger WITH (expression = '0 15 10 ? * MON-FRI');\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#trigger"},"Trigger")," for more information."),(0,l.kt)("h3",{id:"define-sinks"},"Define Sinks"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"@sink(type='restql-call',restql.name=\"restqlExample\")\ndefine stream restqlStream (startTime string);\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE SINK restqlStream WITH (type='query-worker', query.worker.name=\"restqlExample\") (startTime string);\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#sink"},"Sink")," for more information."),(0,l.kt)("h3",{id:"define-sources"},"Define Sources"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"@source(type = 'c8db', collection = \"ExampleInputTable\", @map(type='json'))\ndefine stream ExampleInputTableStream (data string);\n\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE SOURCE ExampleInputTableStream WITH (type = 'database', collection = \"ExampleInputTable\", map.type='json')(data string);\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#source"},"Source")," for more information."),(0,l.kt)("h3",{id:"define-stores"},"Define Stores"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},'@store(type="rdbms", jdbc.url="jdbc:mysql://host:3306", username="root", password="Welcome@123#", jdbc.driver.name="com.mysql.jdbc.Driver", field.length="symbol:100", table.check.query="SELECT 1 FROM StockTable LIMIT")\n@PrimaryKey("id", "symbol")\n@Index("volume")\ndefine table StockTable (id string, symbol string, price float, volume long);\n\n'))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},'CREATE STORE StockTable WITH (type="rdbms", jdbc.url="jdbc:mysql://host:3306", username="root", password="Welcome@123#", jdbc.driver.name="com.mysql.jdbc.Driver", field.length="symbol:100", table.check.query="SELECT 1 FROM StockTable LIMIT", PrimaryKey=\'id\', PrimaryKey=\'symbol\', Index=\'volume\')\n(id string, symbol string, price float, volume long);\n\n')))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#store"},"Store")," for more information."),(0,l.kt)("h3",{id:"define-named-windows"},"Define Named Windows"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"define window SensorWindow (deviceID string, value float, roomNo int) timeBatch(1 second);\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE WINDOW SensorWindow (deviceID string, value float, roomNo int) TUMBLING_TIME(1 second);\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#named-window"},"Named Window")," for more information."),(0,l.kt)("h3",{id:"define-functions"},"Define Functions"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"define function concatFn[javascript] return string {\nvar str1 = data[0];\nvar str2 = data[1];\nvar str3 = data[2];\nvar response = str1 + str2 + str3;\nreturn response;\n};\n\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE FUNCTION concatFn[javascript] RETURN STRING {\nvar str1 = data[0];\nvar str2 = data[1];\nvar str3 = data[2];\nvar response = str1 + str2 + str3;\nreturn response;\n};\n\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#function"},"Function")," for more information."),(0,l.kt)("h3",{id:"define-stream-as-select"},"Define Stream As Select"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"define stream StockStream (symbol string, price float, volume long);\nselect symbol, price, volume\nfrom InputStream[price > 500]#window.length(1)\ninsert into StockStream;\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE STREAM StockStream (symbol string, price float, volume long)\nAS SELECT symbol, price, volume\nFROM InputStream[price > 500] WINDOW SLIDING_LENGTH(1);\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#select"},"Select")," for more information."),(0,l.kt)("h3",{id:"define-table-as-select"},"Define Table As Select"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"define table StockTable (symbol string, price float, volume long);\nselect symbol, price, volume\nfrom InputStream[price > 500]#window.length(1)\ninsert into StockTable;\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE StockTable (symbol string, price float, volume long)\nAS SELECT symbol, price, volume\nFROM InputStream[price > 500] WINDOW SLIDING_LENGTH(1);\n")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#select"},"Select")," for more information."),(0,l.kt)("h3",{id:"query-order"},"Query Order"),(0,l.kt)("p",null,"The order of queries is as follows:"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},"Output action"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"SELECT")," clause"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"FROM")," clause and other grouping clauses")),(0,l.kt)("p",null,"For example:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"select symbol, price, volume\nfrom InputStream[price > 500]#window.length(1)\ninsert into StockStream;\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO StockStream\nSELECT symbol, price, volume\nFROM InputStream[price > 500] WINDOW SLIDING_LENGTH(1);\n")))),(0,l.kt)("h3",{id:"windows-in-queries"},"Windows in Queries"),(0,l.kt)("p",null,"In addition to the new syntax, windows also use new names."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"from ExampleStream#window.length(2) ...\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"FROM ExampleStream WINDOW SLIDING_LENGTH(2) ...\n")))),(0,l.kt)("p",null,"The following table shows the version 1 and version 2 window names:"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"Version 1"),(0,l.kt)("th",{parentName:"tr",align:null},"Version 2"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.time()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW SLIDING_TIME()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.timeBatch()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW TUMBLING_TIME()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.length()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW SLIDING_LENGTH()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.lengthBatch()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW TUMBLING_LENGTH()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.timeLength()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW SLIDING_TIME_LENGTH()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.session()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW SESSION()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.batch()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW TUMBLING()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.sort()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW SORT()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.cron()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW CRON()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.externalTime()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW SLIDING_EXTERNAL_TIME()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.externalTimeBatch()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW SLIDING_EXTERNAL_TIME()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.delay()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW DELAY()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.expression()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW SLIDING_EXPRESSION()")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},"#window.expressionBatch()"),(0,l.kt)("td",{parentName:"tr",align:null},"WINDOW TUMBLING_EXPRESSION()")))),(0,l.kt)("p",null,"Refer to ",(0,l.kt)("a",{parentName:"p",href:"/docs/cep/reference/query-guide#window"},"Window")," for more information."),(0,l.kt)("h3",{id:"where-clauses"},"WHERE Clauses"),(0,l.kt)("p",null,"The ",(0,l.kt)("inlineCode",{parentName:"p"},"WHERE")," clause is an alternative to the ",(0,l.kt)("inlineCode",{parentName:"p"},"HAVING")," clause."),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 1:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-js"},"select roomNo, avg(temp) as avgTemp\nfrom TempStream#window.time(10 min)\nhaving avgTemp > 30\ninsert into AlertStream;\n\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"Version 2:"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO AlertStream\nSELECT roomNo, avg(temp) as avgTemp\nFROM TempStream WINDOW SLIDING_TIME(10 min)\nWHERE avgTemp > 30;\n")))))}k.isMDXComponent=!0}}]);